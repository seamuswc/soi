// Fresh Prisma schema - completely rebuilt from scratch
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Listing {
  id                Int      @id @default(autoincrement())
  building_name     String
  coordinates       String
  floor             String
  sqm               String
  cost              String
  description       String
  rental_type       RentalType
  business_photo    String?
  youtube_link      String?
  reference         String?
  payment_network   String?
  promo_code_used  String?
  expires_at        DateTime
  created_at        DateTime @default(now())
  updated_at        DateTime @updatedAt

  @@map("listings")
}

model PromoCode {
  id             Int      @id @default(autoincrement())
  code           String   @unique
  max_uses       Int
  remaining_uses Int
  email          String?
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  @@map("promo_codes")
}

model User {
  id                Int      @id @default(autoincrement())
  email             String   @unique
  password          String
  payment_reference String
  expires_at        DateTime
  created_at        DateTime @default(now())
  updated_at        DateTime @updatedAt

  @@map("users")
}

model MaintenanceMode {
  id         Int      @id @default(autoincrement())
  enabled    Boolean  @default(false)
  message    String?
  start_time DateTime?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("maintenance_mode")
}

enum RentalType {
  living
  business
}
